import{p as E,_ as B}from"./MangaListItem.2ffa5d2e.js";import{d as w,K as S,r as p,o as n,c as f,w as s,u as a,D as h,L as b,z as k,M as m,i as z,a as t,k as U,N as F,p as L,h as N,O as g,B as x,t as v,v as y,F as I,q as $,s as q,x as M,y as C,E as R,A as V}from"./index.4e684c7c.js";import{e as A}from"./mangas.5e7cac5a.js";const D=w({props:{collectionId:null,collectionCoverUrl:null},setup(_){const u=_,{proxyUrlFor:i}=k(),d=S(()=>u.collectionCoverUrl?i(u.collectionCoverUrl):""),o=p(!1);return(c,l)=>(n(),f(a(b),{class:"shadow"},{default:s(()=>[o.value?(n(),f(a(h),{key:0,class:"opacity-30",src:a(E)},null,8,["src"])):(n(),f(a(h),{key:1,src:a(d),onIonError:l[0]||(l[0]=e=>o.value=!0)},null,8,["src"]))]),_:1}))}}),H=C("Serien"),T={class:"flex overflow-x-auto overflow-y-clip space-x-4 pb-6 pt-4 px-4 snap-x"},G={class:"w-20 line-clamp-1 text-sm text-center pt-2"},K=C("Mangas"),j=w({setup(_){const{client:u}=k(),i=p([]),d=p([]),o=p("");return m(async()=>{const c=u.from("collection_updates").select();d.value=[],o.value!=""&&c.textSearch("collection_name",o.value,{type:"phrase",config:"german"});const{data:l,error:e}=await c.range(0,20).order("date_updated",{ascending:!1});if(e)throw Error(e.message);l!=null&&l.length>0&&l.forEach(r=>d.value.push(r))}),m(async()=>{const c=u.from("mangas").select();i.value=[],o.value!=""&&c.textSearch("title_tsv",o.value,{type:"phrase",config:"german"});const{data:l,error:e}=await c.range(0,20).order("date_updated",{ascending:!1});if(e)throw Error(e.message);l!=null&&l.length>0&&l.forEach(r=>i.value.push(A(r)))}),(c,l)=>(n(),f(a(z),null,{default:s(()=>[t(a(U),{class:"ion-no-border",translucent:!0},{default:s(()=>[t(a(L),{class:"search-toolbar"},{default:s(()=>[t(a(F),{ref:"searchBar",value:o.value,onIonChange:l[0]||(l[0]=e=>{var r;return o.value=(r=e.detail.value)!=null?r:""})},null,8,["value"])]),_:1})]),_:1}),t(a(N),null,{default:s(()=>[t(a(M),{lines:"full"},{default:s(()=>[t(a(g),null,{default:s(()=>[H]),_:1}),x("div",T,[(n(!0),v(I,null,y(d.value,e=>(n(),v("div",{class:"flex-shrink-0 snap-center",key:e.collection_id},[t(D,{class:"w-20 h-20","collection-id":e.collection_id,"collection-cover-url":e.cover},null,8,["collection-id","collection-cover-url"]),x("div",G,R(e.collection_name),1)]))),128))]),t(a(g),null,{default:s(()=>[K]),_:1}),t(a($),null,{default:s(()=>[t(a(q),null,{default:s(()=>[(n(!0),v(I,null,y(i.value,e=>(n(),f(a(V),{key:e.gtin13,"size-lg":"2","size-md":"3","size-sm":"4","size-xs":"4"},{default:s(()=>{var r;return[t(B,{title:e.title,"cover-url":(r=e.cover("m"))!=null?r:"","router-link":`/manga/${e.gtin13}`},null,8,["title","cover-url","router-link"])]}),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{j as default};
