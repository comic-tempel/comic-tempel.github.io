var k=Object.defineProperty,_=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var v=(e,s,r)=>s in e?k(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,p=(e,s)=>{for(var r in s||(s={}))w.call(s,r)&&v(e,r,s[r]);if(f)for(var r of f(s))A.call(s,r)&&v(e,r,s[r]);return e},d=(e,s)=>_(e,g(s));import{u as E}from"./index.6636f647.js";import{r as c,R as b}from"./vendor.4c1cb8ec.js";const{client:y,proxyUrlFor:t}=E(),h=e=>{const s=d(p({},e),{samples:[],coverPack:[],cover(r){var o,a;if((o=e.resources)==null?void 0:o.front_cover)return t((a=e.resources)==null?void 0:a.front_cover,r)}});return e.resources&&(e.resources.back_cover&&(s.backCover=t(e.resources.back_cover)),Array.isArray(e.resources.samples)&&(s.samples=e.resources.samples.map(r=>t(r))),Array.isArray(e.resources.cover_pack)&&(s.coverPack=e.resources.cover_pack.map(r=>t(r)))),s},M=()=>{const e=c();return{load:async r=>{const{data:o,error:a}=await y.from("mangas").select("*").eq("gtin13",r).single();if(o!=null)e.value=h(o);else throw Error(a?a.message:"There is no data...")},manga:e}},P=(e=20)=>{const s=c([]),r=c(""),o=c(0),a=()=>{s.value=[],o.value=0},u=async()=>{const l=y.from("mangas").select();r.value!=""&&l.textSearch("title_tsv",r.value,{type:"phrase",config:"german"});const{data:n,error:i}=await l.range(o.value,o.value+e).order("date_updated",{ascending:!1});if(i)throw Error(i.message);n!=null&&n.length>0&&(n.forEach(m=>s.value.push(h(m))),o.value=o.value+e)};return b(r,()=>{a(),u()}),{load:u,reset:a,mangas:s,filter:r}};export{M as a,P as u};
