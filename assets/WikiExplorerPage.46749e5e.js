import{_ as q,p as W,B as A,a as G}from"./BarcodeScannerModal.ae24f775.js";import{d as I,j as Q,o as s,k as c,a as t,w as a,u as e,l as J,m as U,n as f,t as $,p as V,c as m,q as w,r as K,s as O,v as Z,x as y,y as E,z as X,A as Y,B as ee,C as M,g as te,D as ae,E as se,F as le,G as N,H as P,J as k,K as S,L as D,M as ne,N as T,h as oe,i as re,O as B,P as ce,Q as F}from"./index.1d7060d5.js";import{e as ie}from"./mangas.9756f70a.js";import{b as ue}from"./index.5c4a8140.js";import{_ as de}from"./plugin-vue_export-helper.21dcd24c.js";const _e={class:"w-20 line-clamp-1 text-sm text-center pt-2"},me=I({props:{collectionId:null,collectionCoverUrl:null,collectionName:null},setup(u){const p=u,{proxyUrlFor:h}=V(),C=Q(()=>p.collectionCoverUrl?h(p.collectionCoverUrl):"");return(R,d)=>(s(),c("div",null,[t(e(U),{class:"shadow w-20 h-20"},{default:a(()=>[t(q,{src:e(C)},{default:a(()=>[t(e(J),{class:"opacity-30 w-full",src:e(W)},null,8,["src"])]),_:1},8,["src"])]),_:1}),f("div",_e,$(u.collectionName),1)]))}}),fe={class:"h-36 sm:h-40 lg:h-52 xl:h-64 overflow-clip"},he={class:"text-sm"},ve=I({setup(u){return(p,h)=>(s(),m(e(O),{class:"manga-card"},{default:a(()=>[f("div",fe,[t(e(w),{class:"m-0",animated:""})]),t(e(K),null,{default:a(()=>[f("div",he,[t(e(w),{animated:""})])]),_:1})]),_:1}))}}),pe={class:"w-20 text-sm text-center pt-2"},xe=I({setup(u){return(p,h)=>(s(),c("div",null,[t(e(U),{class:"shadow w-20 h-20"},{default:a(()=>[t(e(w),{class:"m-0",animated:""})]),_:1}),f("div",pe,[t(e(w),{animated:""})])]))}}),ge={class:"h-full grid place-items-center"},ye={class:"text-center"},ke={class:"text-6xl"},Ie={class:"text-md text-medium-default mt-8 w-40"},Se=I({props:{emoji:null,text:null},setup(u){return(p,h)=>(s(),c("div",ge,[f("div",ye,[f("div",ke,$(u.emoji),1),f("div",Ie,$(u.text),1)])]))}});const we=B("Serien"),Ce=B("alle"),be={class:"flex overflow-x-auto overflow-y-clip space-x-4 pb-6 pt-4 px-4 snap-x scrollbar-hide"},$e=B("Mangas"),Be=I({setup(u){const{client:h}=V(),{push:C}=Z(),R=y(),d=y(null),v=y(null),x=y(""),z=y(!0),b=y(0);E(async()=>{const i=h.from("collection_updates").select();let l=!1;setTimeout(()=>{l||(v.value=null)},200),x.value!=""&&i.textSearch("collection_name",x.value,{type:"phrase"});const{data:o,error:r}=await i.range(0,20).order("date_updated",{ascending:!1});if(r)v.value=[],console.error(r.message);else if(o!=null){const _=[];o.forEach(g=>_.push(g)),v.value=_}l=!0}),E(async()=>{const i=h.from("mangas").select();let l=!1;setTimeout(()=>{l||(d.value=null)},200),x.value!=""&&i.textSearch("title_tsv",x.value,{type:"phrase"});const{data:o,error:r}=await i.range(0,20).order("date_updated",{ascending:!1});if(r)d.value=[],console.error(r.message);else if(o!=null){const _=[];o.forEach(g=>_.push(ie(g))),d.value=_}l=!0});const j=i=>{const l=i.detail.scrollTop;l<0||Math.abs(l-b.value)<60||(z.value=l<b.value,b.value=l)},H=async i=>{await C({name:"MangaDetailsPage",params:{gtin13:i}}),ce.dismiss()};return(i,l)=>(s(),m(e(re),null,{default:a(()=>[t(e(se),{translucent:!0,class:ae(["ion-no-border",{"header-hidden":!z.value}])},{default:a(()=>[t(e(X),{class:"search-toolbar"},{default:a(()=>[t(e(Y),{ref:"searchBar",value:x.value,placeholder:"Mangas und Serien suchen...",onIonChange:l[0]||(l[0]=o=>{var r;return x.value=(r=o.detail.value)!=null?r:""})},null,8,["value"]),t(e(ee),{class:"mr-2",slot:"end"},{default:a(()=>[t(e(M),{id:"scan-button",fill:"solid",color:"primary"},{default:a(()=>[t(e(te),{slot:"icon-only",src:e(ue)},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),t(e(oe),{fullscreen:!0,"scroll-events":!0,onIonScroll:l[1]||(l[1]=o=>j(o))},{default:a(()=>{var o,r;return[t(A,{ref_key:"barcodeScanner",ref:R,trigger:"scan-button",onScanned:H},null,512),((o=v.value)==null?void 0:o.length)!=0||((r=d.value)==null?void 0:r.length)!=0?(s(),m(e(le),{key:0},{default:a(()=>{var _,g;return[((_=v.value)==null?void 0:_.length)!=0?(s(),c(k,{key:0},[t(e(N),null,{default:a(()=>[t(e(P),{class:"text-xl mt-2"},{default:a(()=>[we]),_:1}),t(e(M),null,{default:a(()=>[Ce]),_:1})]),_:1}),f("div",be,[v.value==null?(s(!0),c(k,{key:0},S(20+1,n=>(s(),c("div",{class:"flex-shrink-0 snap-center",key:n},[t(xe)]))),128)):(s(!0),c(k,{key:1},S(v.value,n=>(s(),c("div",{class:"flex-shrink-0 snap-center",key:n.collection_id},[t(me,{"collection-id":n.collection_id,"collection-cover-url":n.cover,"collection-name":n.collection_name},null,8,["collection-id","collection-cover-url","collection-name"])]))),128))])],64)):D("",!0),((g=d.value)==null?void 0:g.length)!=0?(s(),c(k,{key:1},[t(e(N),null,{default:a(()=>[t(e(P),{class:"text-xl mt-2"},{default:a(()=>[$e]),_:1})]),_:1}),t(e(ne),null,{default:a(()=>[d.value==null?(s(),m(e(T),{key:0},{default:a(()=>[(s(!0),c(k,null,S(20+1,n=>(s(),m(e(F),{key:n,"size-lg":"2","size-md":"3","size-sm":"4","size-xs":"4"},{default:a(()=>[t(ve)]),_:2},1024))),128))]),_:1})):(s(),m(e(T),{key:1},{default:a(()=>[(s(!0),c(k,null,S(d.value,n=>(s(),m(e(F),{key:n.gtin13,"size-lg":"2","size-md":"3","size-sm":"4","size-xs":"4"},{default:a(()=>{var L;return[t(G,{title:n.title,"cover-url":(L=n.cover("m"))!=null?L:"","router-link":`/manga/${n.gtin13}`},null,8,["title","cover-url","router-link"])]}),_:2},1024))),128))]),_:1}))]),_:1})],64)):D("",!0)]}),_:1})):(s(),m(Se,{key:1,emoji:"\u{1F914}",text:"Weder Serien noch Mangas gefunden"}))]}),_:1})]),_:1}))}});var Ne=de(Be,[["__scopeId","data-v-5ac06278"]]);export{Ne as default};
