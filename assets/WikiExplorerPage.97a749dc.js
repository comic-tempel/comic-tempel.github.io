import{a as F,p as T,B as q,_ as D}from"./BarcodeScannerModal.951a25e3.js";import{d as I,U as H,o as n,x as c,a,w as t,u as e,E as W,V as M,K as v,M as A,A as N,c as _,J as y,N as Z,O as j,j as G,r as d,P as R,l as J,W as K,m as O,n as z,g as Q,X,q as Y,s as ee,Y as L,L as $,y as x,F as g,t as ae,v as E,h as le,i as te,z as b,Z as se,B as P}from"./index.2d6df163.js";import{e as ne}from"./mangas.e5277e7d.js";import{b as oe}from"./index.50a34d4d.js";import{_ as re}from"./plugin-vue_export-helper.21dcd24c.js";const ce={class:"w-20 line-clamp-1 text-sm text-center pt-2"},ie=I({props:{collectionId:null,collectionCoverUrl:null,collectionName:null},setup(f){const m=f,{proxyUrlFor:i}=N(),k=H(()=>m.collectionCoverUrl?i(m.collectionCoverUrl):"");return(C,h)=>(n(),c("div",null,[a(e(M),{class:"shadow w-20 h-20"},{default:t(()=>[a(F,{src:e(k)},{default:t(()=>[a(e(W),{class:"opacity-30 w-full",src:e(T)},null,8,["src"])]),_:1},8,["src"])]),_:1}),v("div",ce,A(f.collectionName),1)]))}}),ue={class:"h-36 sm:h-40 lg:h-52 xl:h-64 overflow-clip"},de={class:"text-sm"},_e=I({setup(f){return(m,i)=>(n(),_(e(j),{class:"manga-card"},{default:t(()=>[v("div",ue,[a(e(y),{class:"m-0",animated:""})]),a(e(Z),null,{default:t(()=>[v("div",de,[a(e(y),{animated:""})])]),_:1})]),_:1}))}}),fe={class:"w-20 text-sm text-center pt-2"},me=I({setup(f){return(m,i)=>(n(),c("div",null,[a(e(M),{class:"shadow w-20 h-20"},{default:t(()=>[a(e(y),{class:"m-0",animated:""})]),_:1}),v("div",fe,[a(e(y),{animated:""})])]))}});const he=b("Serien"),pe=b("alle"),ve={class:"flex overflow-x-auto overflow-y-clip space-x-4 pb-6 pt-4 px-4 snap-x scrollbar-hide"},xe=b("Mangas"),ge=I({setup(f){const{client:i}=N(),{push:k}=G(),C=d(),h=d(null),p=d(null),u=d(""),B=d(!0),w=d(0);R(async()=>{const r=i.from("collection_updates").select();p.value=null,u.value!=""&&r.textSearch("collection_name",u.value,{type:"phrase",config:"german"});const{data:s,error:l}=await r.range(0,20).order("date_updated",{ascending:!1});if(l)throw p.value=null,Error(l.message);if(s!=null&&s.length>0){const o=[];s.forEach(S=>o.push(S)),p.value=o}}),R(async()=>{const r=i.from("mangas").select();h.value=null,u.value!=""&&r.textSearch("title_tsv",u.value,{type:"phrase",config:"german"});const{data:s,error:l}=await r.range(0,20).order("date_updated",{ascending:!1});if(l)throw Error(l.message);if(s!=null&&s.length>0){const o=[];s.forEach(S=>o.push(ne(S))),h.value=o}});const U=r=>{const s=r.detail.scrollTop;s<0||Math.abs(s-w.value)<60||(B.value=s<w.value,w.value=s)},V=async r=>{await k({name:"MangaDetailsPage",params:{gtin13:r}}),se.dismiss()};return(r,s)=>(n(),_(e(te),null,{default:t(()=>[a(e(Y),{translucent:!0,class:X(["ion-no-border",{"header-hidden":!B.value}])},{default:t(()=>[a(e(J),{class:"search-toolbar"},{default:t(()=>[a(e(K),{ref:"searchBar",value:u.value,placeholder:"Mangas und Serien suchen...",onIonChange:s[0]||(s[0]=l=>{var o;return u.value=(o=l.detail.value)!=null?o:""})},null,8,["value"]),a(e(O),{class:"mr-2",slot:"end"},{default:t(()=>[a(e(z),{id:"scan-button",fill:"solid",color:"primary"},{default:t(()=>[a(e(Q),{slot:"icon-only",src:e(oe)},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),a(e(le),{fullscreen:!0,"scroll-events":!0,onIonScroll:s[1]||(s[1]=l=>U(l))},{default:t(()=>[a(q,{ref_key:"barcodeScanner",ref:C,trigger:"scan-button",onScanned:V},null,512),a(e(ee),{lines:"full"},{default:t(()=>[a(e(L),null,{default:t(()=>[a(e($),{class:"text-xl mt-2"},{default:t(()=>[he]),_:1}),a(e(z),null,{default:t(()=>[pe]),_:1})]),_:1}),v("div",ve,[p.value==null?(n(!0),c(g,{key:0},x(20+1,l=>(n(),c("div",{class:"flex-shrink-0 snap-center",key:l},[a(me)]))),128)):(n(!0),c(g,{key:1},x(p.value,l=>(n(),c("div",{class:"flex-shrink-0 snap-center",key:l.collection_id},[a(ie,{"collection-id":l.collection_id,"collection-cover-url":l.cover,"collection-name":l.collection_name},null,8,["collection-id","collection-cover-url","collection-name"])]))),128))]),a(e(L),null,{default:t(()=>[a(e($),{class:"text-xl mt-2"},{default:t(()=>[xe]),_:1})]),_:1}),a(e(ae),null,{default:t(()=>[h.value==null?(n(),_(e(E),{key:0},{default:t(()=>[(n(!0),c(g,null,x(20+1,l=>(n(),_(e(P),{key:l,"size-lg":"2","size-md":"3","size-sm":"4","size-xs":"4"},{default:t(()=>[a(_e)]),_:2},1024))),128))]),_:1})):(n(),_(e(E),{key:1},{default:t(()=>[(n(!0),c(g,null,x(h.value,l=>(n(),_(e(P),{key:l.gtin13,"size-lg":"2","size-md":"3","size-sm":"4","size-xs":"4"},{default:t(()=>{var o;return[a(D,{title:l.title,"cover-url":(o=l.cover("m"))!=null?o:"","router-link":`/manga/${l.gtin13}`},null,8,["title","cover-url","router-link"])]}),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}});var be=re(ge,[["__scopeId","data-v-2621e6c6"]]);export{be as default};
