import{d as m,H as d,a as t,w as a,u as e,o as n,D as u,as as _,c as f,$ as h,K as p,x as S,p as x,a1 as R,T as E,s as k,v as I,ao as P,a5 as T,z as D,h as F,i as b}from"./index.13905425.js";import{c as A,u as v}from"./useMachine.27564314.js";const B=m({__name:"ThePasswordResetForm",props:{state:null},emits:["reset"],setup(r){return(o,s)=>(n(),d("div",null,[t(e(_),null,{default:a(()=>[u("Dein Passwort kann nur mit Hilfe Deiner E-Mail Adresse ge\xE4ndert werden. Wir schicken Dir einen Link der Dich zum Formular f\xFCr ein neues Passwort f\xFChrt. M\xF6chtest Du ein neues Passwort vergeben, bet\xE4tige jetzt den Button.")]),_:1}),t(e(S),{class:"absolute bottom-3.5 left-3.5 right-3.5",expand:"full",disabled:r.state=="SendingEmail",onClick:s[0]||(s[0]=i=>o.$emit("reset"))},{default:a(()=>[r.state=="SendingEmail"?(n(),f(e(h),{key:0,slot:"icon-only"})):(n(),d(p,{key:1},[u("Link anfordern")],64))]),_:1},8,["disabled"])]))}}),M=m({__name:"PasswordResetPage",setup(r){const{requestPasswordReset:o}=x(),s=A({id:"PasswordResetPage",initial:"AwaitingReset",states:{AwaitingReset:{on:{RESET_REQUESTED:{target:"SendingEmail",actions:"resetPassword"}}},SendingEmail:{on:{MAIL_SENT:{target:"AwaitingReset",actions:"toastSuccess"},RESET_FAILED:{target:"AwaitingReset",actions:"toastFailure"}}}}},{actions:{toastSuccess:async()=>{(await E.create({message:"Wir haben Dir eine E-Mail geschickt.",color:"success",duration:3e3})).present()},toastFailure:async()=>{(await E.create({message:"Leider k\xF6nnen wir Dein Passwort aktuell nicht \xE4ndern. Bitte versuche es sp\xE4ter erneut.",color:"danger",duration:3e3})).present()},resetPassword:async()=>{try{await o(),l("MAIL_SENT")}catch{l("RESET_FAILED")}}}}),{state:i,send:l}=v(s,{devTools:!1}),g=R(()=>i.value.value);return(w,c)=>(n(),f(e(b),null,{default:a(()=>[t(e(D),null,{default:a(()=>[t(e(k),null,{default:a(()=>[t(e(I),{slot:"start"},{default:a(()=>[t(e(P),{text:"","default-href":"/",disabled:e(i).matches("SendingEmail")},null,8,["disabled"])]),_:1}),t(e(T),null,{default:a(()=>[u("Passwort \xE4ndern")]),_:1})]),_:1})]),_:1}),t(e(F),null,{default:a(()=>[t(B,{class:"p-4",state:e(g),onReset:c[0]||(c[0]=y=>e(l)("RESET_REQUESTED"))},null,8,["state"])]),_:1})]),_:1}))}});export{M as default};
