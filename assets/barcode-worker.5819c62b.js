(function(){"use strict";var xn=(()=>{var S=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename!="undefined"&&(S=S||__filename),function(p){p=p||{};var r;r||(r=typeof p!="undefined"?p:{});var w=Object.assign,D,A;r.ready=new Promise(function(n,t){D=n,A=t});var b=w({},r),X=[],I="./this.program",O=(n,t)=>{throw t},on=typeof window=="object",H=typeof importScripts=="function",sn=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="",V,P,U,K,W,Q;sn?(y=H?require("path").dirname(y)+"/":__dirname+"/",Q=function(){W||(K=require("fs"),W=require("path"))},V=function(n,t){return Q(),n=W.normalize(n),K.readFileSync(n,t?null:"utf8")},U=function(n){return n=V(n,!0),n.buffer||(n=new Uint8Array(n)),n},P=function(n,t,i){Q(),n=W.normalize(n),K.readFile(n,function(u,o){u?i(u):t(o.buffer)})},1<process.argv.length&&(I=process.argv[1].replace(/\\/g,"/")),X=process.argv.slice(2),process.on("uncaughtException",function(n){if(!(n instanceof N))throw n}),process.on("unhandledRejection",function(n){throw n}),O=(n,t)=>{if(fn||0<wn)throw process.exitCode=n,t;t instanceof N||R("exiting due to exception: "+t),process.exit(n)},r.inspect=function(){return"[Emscripten Module object]"}):(on||H)&&(H?y=self.location.href:typeof document!="undefined"&&document.currentScript&&(y=document.currentScript.src),S&&(y=S),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",V=function(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.send(null),t.responseText},H&&(U=function(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),P=function(n,t,i){var u=new XMLHttpRequest;u.open("GET",n,!0),u.responseType="arraybuffer",u.onload=function(){u.status==200||u.status==0&&u.response?t(u.response):i()},u.onerror=i,u.send(null)});var kn=r.print||console.log.bind(console),R=r.printErr||console.warn.bind(console);w(r,b),b=null,r.arguments&&(X=r.arguments),r.thisProgram&&(I=r.thisProgram),r.quit&&(O=r.quit);var B;r.wasmBinary&&(B=r.wasmBinary);var fn=r.noExitRuntime||!0;typeof WebAssembly!="object"&&T("no native wasm support detected");var Z,$=!1;function Cn(n,t,i,u){var o={string:function(l){var d=0;if(l!=null&&l!==0){var C=(l.length<<2)+1;d=k(C),nn(l,Y,d,C)}return d},array:function(l){var d=k(l.length);return M.set(l,d),d}};n=r["_"+n];var a=[],c=0;if(u)for(var g=0;g<u.length;g++){var h=o[i[g]];h?(c===0&&(c=Mn()),a[g]=h(u[g])):a[g]=u[g]}return i=n.apply(null,a),i=function(l){return c!==0&&bn(c),t==="string"?_(l):t==="boolean"?!!l:l}(i)}var cn=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function ln(n,t,i){var u=t+i;for(i=t;n[i]&&!(i>=u);)++i;if(16<i-t&&n.subarray&&cn)return cn.decode(n.subarray(t,i));for(u="";t<i;){var o=n[t++];if(o&128){var a=n[t++]&63;if((o&224)==192)u+=String.fromCharCode((o&31)<<6|a);else{var c=n[t++]&63;o=(o&240)==224?(o&15)<<12|a<<6|c:(o&7)<<18|a<<12|c<<6|n[t++]&63,65536>o?u+=String.fromCharCode(o):(o-=65536,u+=String.fromCharCode(55296|o>>10,56320|o&1023))}}else u+=String.fromCharCode(o)}return u}function _(n,t){return n?ln(Y,n,t):""}function nn(n,t,i,u){if(0<u){u=i+u-1;for(var o=0;o<n.length;++o){var a=n.charCodeAt(o);if(55296<=a&&57343>=a){var c=n.charCodeAt(++o);a=65536+((a&1023)<<10)|c&1023}if(127>=a){if(i>=u)break;t[i++]=a}else{if(2047>=a){if(i+1>=u)break;t[i++]=192|a>>6}else{if(65535>=a){if(i+2>=u)break;t[i++]=224|a>>12}else{if(i+3>=u)break;t[i++]=240|a>>18,t[i++]=128|a>>12&63}t[i++]=128|a>>6&63}t[i++]=128|a&63}}t[i]=0}}function dn(n){for(var t=0,i=0;i<n.length;++i){var u=n.charCodeAt(i);55296<=u&&57343>=u&&(u=65536+((u&1023)<<10)|n.charCodeAt(++i)&1023),127>=u?++t:t=2047>=u?t+2:65535>=u?t+3:t+4}return t}function mn(n){var t=dn(n)+1,i=k(t);return nn(n,M,i,t),i}var gn,M,Y,f;function pn(){var n=Z.buffer;gn=n,r.HEAP8=M=new Int8Array(n),r.HEAP16=new Int16Array(n),r.HEAP32=f=new Int32Array(n),r.HEAPU8=Y=new Uint8Array(n),r.HEAPU16=new Uint16Array(n),r.HEAPU32=new Uint32Array(n),r.HEAPF32=new Float32Array(n),r.HEAPF64=new Float64Array(n)}var tn,hn=[],yn=[],In=[],vn=[],wn=0;function On(){var n=r.preRun.shift();hn.unshift(n)}var E=0,x=null;r.preloadedImages={},r.preloadedAudios={};function T(n){throw r.onAbort&&r.onAbort(n),n="Aborted("+n+")",R(n),$=!0,n=new WebAssembly.RuntimeError(n+". Build with -s ASSERTIONS=1 for more info."),A(n),n}function An(){return v.startsWith("data:application/octet-stream;base64,")}var v;if(v="zbar.wasm",!An()){var Dn=v;v=r.locateFile?r.locateFile(Dn,y):y+Dn}function Sn(){var n=v;try{if(n==v&&B)return new Uint8Array(B);if(U)return U(n);throw"both async and sync fetching of the wasm failed"}catch(t){T(t)}}function Pn(){if(!B&&(on||H)){if(typeof fetch=="function"&&!v.startsWith("file://"))return fetch(v,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+v+"'";return n.arrayBuffer()}).catch(function(){return Sn()});if(P)return new Promise(function(n,t){P(v,function(i){n(new Uint8Array(i))},t)})}return Promise.resolve().then(function(){return Sn()})}function q(n){for(;0<n.length;){var t=n.shift();if(typeof t=="function")t(r);else{var i=t.N;typeof i=="number"?t.H===void 0?tn.get(i)():tn.get(i)(t.H):i(t.H===void 0?null:t.H)}}}var Rn;Rn=sn?()=>{var n=process.hrtime();return 1e3*n[0]+n[1]/1e6}:()=>performance.now();var en={};function _n(){if(!rn){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},t;for(t in en)en[t]===void 0?delete n[t]:n[t]=en[t];var i=[];for(t in n)i.push(t+"="+n[t]);rn=i}return rn}var rn,Un=[null,[],[]],En={};function G(n){return n%4===0&&(n%100!==0||n%400===0)}function un(n,t){for(var i=0,u=0;u<=t;i+=n[u++]);return i}var j=[31,29,31,30,31,30,31,31,30,31,30,31],z=[31,28,31,30,31,30,31,31,30,31,30,31];function L(n,t){for(n=new Date(n.getTime());0<t;){var i=n.getMonth(),u=(G(n.getFullYear())?j:z)[i];if(t>u-n.getDate())t-=u-n.getDate()+1,n.setDate(1),11>i?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else{n.setDate(n.getDate()+t);break}}return n}function Wn(n,t,i,u){function o(e,s,m){for(e=typeof e=="number"?e.toString():e||"";e.length<s;)e=m[0]+e;return e}function a(e,s){return o(e,s,"0")}function c(e,s){function m(Yn){return 0>Yn?-1:0<Yn?1:0}var F;return(F=m(e.getFullYear()-s.getFullYear()))===0&&(F=m(e.getMonth()-s.getMonth()))===0&&(F=m(e.getDate()-s.getDate())),F}function g(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function h(e){e=L(new Date(e.A+1900,0,1),e.G);var s=new Date(e.getFullYear()+1,0,4),m=g(new Date(e.getFullYear(),0,4));return s=g(s),0>=c(m,e)?0>=c(s,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var l=f[u+40>>2];u={K:f[u>>2],J:f[u+4>>2],D:f[u+8>>2],C:f[u+12>>2],B:f[u+16>>2],A:f[u+20>>2],F:f[u+24>>2],G:f[u+28>>2],P:f[u+32>>2],I:f[u+36>>2],L:l?_(l):""},i=_(i),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var d in l)i=i.replace(new RegExp(d,"g"),l[d]);var C="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Bn="January February March April May June July August September October November December".split(" ");l={"%a":function(e){return C[e.F].substring(0,3)},"%A":function(e){return C[e.F]},"%b":function(e){return Bn[e.B].substring(0,3)},"%B":function(e){return Bn[e.B]},"%C":function(e){return a((e.A+1900)/100|0,2)},"%d":function(e){return a(e.C,2)},"%e":function(e){return o(e.C,2," ")},"%g":function(e){return h(e).toString().substring(2)},"%G":function(e){return h(e)},"%H":function(e){return a(e.D,2)},"%I":function(e){return e=e.D,e==0?e=12:12<e&&(e-=12),a(e,2)},"%j":function(e){return a(e.C+un(G(e.A+1900)?j:z,e.B-1),3)},"%m":function(e){return a(e.B+1,2)},"%M":function(e){return a(e.J,2)},"%n":function(){return`
`},"%p":function(e){return 0<=e.D&&12>e.D?"AM":"PM"},"%S":function(e){return a(e.K,2)},"%t":function(){return"	"},"%u":function(e){return e.F||7},"%U":function(e){var s=new Date(e.A+1900,0,1),m=s.getDay()===0?s:L(s,7-s.getDay());return e=new Date(e.A+1900,e.B,e.C),0>c(m,e)?a(Math.ceil((31-m.getDate()+(un(G(e.getFullYear())?j:z,e.getMonth()-1)-31)+e.getDate())/7),2):c(m,s)===0?"01":"00"},"%V":function(e){var s=new Date(e.A+1901,0,4),m=g(new Date(e.A+1900,0,4));s=g(s);var F=L(new Date(e.A+1900,0,1),e.G);return 0>c(F,m)?"53":0>=c(s,F)?"01":a(Math.ceil((m.getFullYear()<e.A+1900?e.G+32-m.getDate():e.G+1-m.getDate())/7),2)},"%w":function(e){return e.F},"%W":function(e){var s=new Date(e.A,0,1),m=s.getDay()===1?s:L(s,s.getDay()===0?1:7-s.getDay()+1);return e=new Date(e.A+1900,e.B,e.C),0>c(m,e)?a(Math.ceil((31-m.getDate()+(un(G(e.getFullYear())?j:z,e.getMonth()-1)-31)+e.getDate())/7),2):c(m,s)===0?"01":"00"},"%y":function(e){return(e.A+1900).toString().substring(2)},"%Y":function(e){return e.A+1900},"%z":function(e){e=e.I;var s=0<=e;return e=Math.abs(e)/60,(s?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.L},"%%":function(){return"%"}};for(d in l)i.includes(d)&&(i=i.replace(new RegExp(d,"g"),l[d](u)));return d=qn(i),d.length>t?0:(M.set(d,n),d.length-1)}function qn(n){var t=Array(dn(n)+1);return nn(n,t,0,t.length),t}var Gn={k:function(n,t,i,u){T("Assertion failed: "+_(n)+", at: "+[t?_(t):"unknown filename",i,u?_(u):"unknown function"])},a:function(){T("")},j:function(n,t){if(n===0)n=Date.now();else if(n===1||n===4)n=Rn();else return f[Fn()>>2]=28,-1;return f[t>>2]=n/1e3|0,f[t+4>>2]=n%1e3*1e6|0,0},c:function(n){var t=Y.length;if(n>>>=0,2147483648<n)return!1;for(var i=1;4>=i;i*=2){var u=t*(1+.2/i);u=Math.min(u,n+100663296),u=Math.max(n,u),0<u%65536&&(u+=65536-u%65536);n:{try{Z.grow(Math.min(2147483648,u)-gn.byteLength+65535>>>16),pn();var o=1;break n}catch{}o=void 0}if(o)return!0}return!1},e:function(n,t){var i=0;return _n().forEach(function(u,o){var a=t+i;for(o=f[n+4*o>>2]=a,a=0;a<u.length;++a)M[o++>>0]=u.charCodeAt(a);M[o>>0]=0,i+=u.length+1}),0},f:function(n,t){var i=_n();f[n>>2]=i.length;var u=0;return i.forEach(function(o){u+=o.length+1}),f[t>>2]=u,0},h:function(){return 0},g:function(n,t,i,u){return n=En.O(n),t=En.M(n,t,i),f[u>>2]=t,0},i:function(){},b:function(n,t,i,u){for(var o=0,a=0;a<i;a++){var c=f[t>>2],g=f[t+4>>2];t+=8;for(var h=0;h<g;h++){var l=Y[c+h],d=Un[n];l===0||l===10?((n===1?kn:R)(ln(d,0)),d.length=0):d.push(l)}o+=g}return f[u>>2]=o,0},d:function(n,t,i,u){return Wn(n,t,i,u)}};(function(){function n(o){r.asm=o.exports,Z=r.asm.l,pn(),tn=r.asm.s,yn.unshift(r.asm.m),E--,r.monitorRunDependencies&&r.monitorRunDependencies(E),E==0&&x&&(o=x,x=null,o())}function t(o){n(o.instance)}function i(o){return Pn().then(function(a){return WebAssembly.instantiate(a,u)}).then(function(a){return a}).then(o,function(a){R("failed to asynchronously prepare wasm: "+a),T(a)})}var u={a:Gn};if(E++,r.monitorRunDependencies&&r.monitorRunDependencies(E),r.instantiateWasm)try{return r.instantiateWasm(u,n)}catch(o){return R("Module.instantiateWasm callback failed with error: "+o),!1}return function(){return B||typeof WebAssembly.instantiateStreaming!="function"||An()||v.startsWith("file://")||typeof fetch!="function"?i(t):fetch(v,{credentials:"same-origin"}).then(function(o){return WebAssembly.instantiateStreaming(o,u).then(t,function(a){return R("wasm streaming compile failed: "+a),R("falling back to ArrayBuffer instantiation"),i(t)})})}().catch(A),{}})(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.m).apply(null,arguments)},r._createBuffer=function(){return(r._createBuffer=r.asm.n).apply(null,arguments)},r._deleteBuffer=function(){return(r._deleteBuffer=r.asm.o).apply(null,arguments)},r._triggerDecode=function(){return(r._triggerDecode=r.asm.p).apply(null,arguments)},r._getScanResults=function(){return(r._getScanResults=r.asm.q).apply(null,arguments)},r._main=function(){return(r._main=r.asm.r).apply(null,arguments)};var Fn=r.___errno_location=function(){return(Fn=r.___errno_location=r.asm.t).apply(null,arguments)},Mn=r.stackSave=function(){return(Mn=r.stackSave=r.asm.u).apply(null,arguments)},bn=r.stackRestore=function(){return(bn=r.stackRestore=r.asm.v).apply(null,arguments)},k=r.stackAlloc=function(){return(k=r.stackAlloc=r.asm.w).apply(null,arguments)};r.cwrap=function(n,t,i,u){i=i||[];var o=i.every(function(a){return a==="number"});return t!=="string"&&o&&!u?r["_"+n]:function(){return Cn(n,t,i,arguments)}},r.UTF8ToString=_;var J;function N(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}x=function n(){J||an(),J||(x=n)};function an(n){function t(){if(!J&&(J=!0,r.calledRun=!0,!$)){if(q(yn),q(In),D(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Hn){var i=n,u=r._main;i=i||[];var o=i.length+1,a=k(4*(o+1));f[a>>2]=mn(I);for(var c=1;c<o;c++)f[(a>>2)+c]=mn(i[c-1]);f[(a>>2)+o]=0;try{var g=u(o,a);fn||0<wn||(r.onExit&&r.onExit(g),$=!0),O(g,new N(g))}catch(h){h instanceof N||h=="unwind"||O(1,h)}finally{}}if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)i=r.postRun.shift(),vn.unshift(i);q(vn)}}if(n=n||X,!(0<E)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)On();q(hn),0<E||(r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),t()},1)):t())}}if(r.run=an,r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();var Hn=!0;return r.noInitialRun&&(Hn=!1),an(),p.ready}})();class Tn{initialize(p){return(async()=>{p||(p={});const r=p.wasmDirectory||"./wasm";return this.mod=await xn({locateFile:w=>`${r}/${w}`}),this.api={createBuffer:this.mod.cwrap("createBuffer","number",["number"]),deleteBuffer:this.mod.cwrap("deleteBuffer","",["number"]),triggerDecode:this.mod.cwrap("triggerDecode","number",["number","number","number"]),getScanResults:this.mod.cwrap("getScanResults","number",[])},this})()}decode(p,r,w){const D=this.api.createBuffer(r*w*4);this.mod.HEAPU8.set(p,D);const A=[];if(this.api.triggerDecode(D,r,w)>0){const b=this.api.getScanResults();A.push(this.mod.UTF8ToString(b)),this.api.deleteBuffer(b)}return A.length>0?A[0]:null}}(async()=>{const S=await new Tn().initialize({wasmDirectory:"../wasm"});self.addEventListener("message",p=>{"width"in p.data&&"height"in p.data&&(self.width=p.data.width,self.height=p.data.height);const{data:r}=p.data;if(!r)return;const w=new Date().getTime(),D=S.decode(r,self.width,self.height),A=new Date().getTime();D&&postMessage({data:D,ms:A-w})})})()})();
