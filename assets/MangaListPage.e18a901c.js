import{p as v,u as b,s as B,c as E}from"./mangas.8cb725b0.js";import{d as m,o as l,a as o,b as e,e as a,u as t,q as $,s as M,v as k,x as S,y as I,z as _,A as h,B as L,C as A,D as x,E as H,r as R,F,G as p,H as T,J as N,K as P,L as V,M as w,N as D,O as q,P as z,Q as G}from"./vendor.801380ed.js";import{u as J}from"./useMachine.bd75bb26.js";import"./index.e7ab0164.js";const K=m({props:{title:null},setup(u){return(r,i)=>(l(),o(t(A),{translucent:!0},{default:e(()=>[a(t(L),null,{default:e(()=>[a(t($),null,{default:e(()=>[M(k(u.title),1)]),_:1}),a(t(S),{slot:"start"},{default:e(()=>[a(t(I),{"router-link":"/profile"},{default:e(()=>[a(t(_),{slot:"icon-only",src:t(v)},null,8,["src"])]),_:1})]),_:1}),a(t(S),{slot:"end"},{default:e(()=>[h(r.$slots,"actions")]),_:3})]),_:3}),h(r.$slots,"toolbars")]),_:3}))}}),O=m({props:{title:null},setup(u){return(r,i)=>(l(),o(t(H),{button:!0,detail:!0},{default:e(()=>[a(t(x),{class:"ion-text-wrap"},{default:e(()=>[M(k(u.title),1)]),_:1})]),_:1}))}}),X=m({setup(u){const{load:r,mangas:i,filter:c}=b(),g=R(null),y=F({id:"MangaListPage",initial:"ListMangas",states:{ListMangas:{entry:"load",on:{SEARCH:{target:"SearchMangas",actions:"focusSearchInput"}}},SearchMangas:{on:{CLEAR_SEARCH:{target:"ListMangas",actions:["clearFilter"]}}}}},{actions:{focusSearchInput:()=>setTimeout(()=>{var d;return(d=g.value)==null?void 0:d.$el.setFocus()},300),clearFilter:()=>c.value="",load:r}}),{state:f,send:C}=J(y,{devTools:!1});return(d,s)=>(l(),o(t(G),null,{default:e(()=>[a(K,{title:"Mangas"},{actions:e(()=>[t(f).matches("ListMangas")?(l(),o(t(I),{key:0,onClick:s[0]||(s[0]=n=>t(C)("SEARCH"))},{default:e(()=>[a(t(_),{slot:"icon-only",icon:t(B)},null,8,["icon"])]),_:1})):p("",!0),t(f).matches("SearchMangas")?(l(),o(t(I),{key:1,onClick:s[1]||(s[1]=n=>t(C)("CLEAR_SEARCH"))},{default:e(()=>[a(t(_),{slot:"icon-only",icon:t(E)},null,8,["icon"])]),_:1})):p("",!0)]),toolbars:e(()=>[t(f).matches("SearchMangas")?(l(),o(t(L),{key:0,class:"ion-no-border"},{default:e(()=>[a(t(T),{ref_key:"searchBar",ref:g,value:t(c),onIonChange:s[2]||(s[2]=n=>c.value=n.detail.value)},null,8,["value"])]),_:1})):p("",!0)]),_:1}),a(t(z),{fullscreen:!0},{default:e(()=>[a(t(N),{lines:"full"},{default:e(()=>[(l(!0),P(w,null,V(t(i),n=>(l(),o(O,{key:n.gtin13,title:n.title,"router-link":`/manga/${n.gtin13}`},null,8,["title","router-link"]))),128))]),_:1}),a(t(D),{onIonInfinite:s[3]||(s[3]=n=>t(r)().then(()=>n.target.complete()))},{default:e(()=>[a(t(q))]),_:1})]),_:1})]),_:1}))}});export{X as default};
