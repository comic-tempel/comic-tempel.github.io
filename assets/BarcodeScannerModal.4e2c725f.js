import{_ as h,a as g}from"./WikiImg.5cde3b83.js";import{d as u,c as l,w as t,y as p,u as a,o as c,Q as b,a as o,g as w,E as k,j as r,C as y,D as C,R as v,l as I,m as x,S as B,T as V,P as M}from"./index.f01522e6.js";import{h as $,l as N}from"./index.2d43f867.js";import{_ as S}from"./BarcodeScanner.292ccd56.js";const D={class:"h-36 sm:h-40 lg:h-52 xl:h-64 overflow-clip"},j=r("div",{class:"opacity-30"},[r("img",{class:"w-full",src:g})],-1),q={class:"absolute left-3 top-3"},z={class:"line-clamp-1 text-sm"},U=u({__name:"MangaListItem",props:{title:null,coverUrl:null,isVisible:{type:Boolean},shelf:null},setup(s){return(i,d)=>(c(),l(a(x),{class:p({"manga-card":!0,translucent:!s.isVisible}),button:""},{default:t(()=>[s.shelf!=null?(c(),l(a(b),{key:0,class:"absolute top-1 right-1"},{default:t(()=>[o(a(w),{size:"small",src:s.shelf=="wished"?a($):a(N)},null,8,["src"])]),_:1})):k("",!0),r("div",D,[o(h,{src:s.coverUrl},{default:t(()=>[j,r("div",q,[o(a(y),{class:"text-white"},{default:t(()=>[C("kein Cover")]),_:1})])]),_:1},8,["src"])]),o(a(I),null,{default:t(()=>[r("div",z,v(s.title),1)]),_:1})]),_:1},8,["class"]))}}),A=u({__name:"BarcodeScannerModal",emits:["scanned"],setup(s,{emit:i}){const{client:d}=M(),_=async n=>{const{data:e,error:m}=await d.from("mangas").select().or(`gtin13.eq.${n},isbn10.eq.${n}`).single();return m||e==null?Promise.reject(new Error("Das ist kein Manga")):e},f=async n=>{try{const e=await _(n);i("scanned",e.gtin13)}catch(e){(await V.create({message:e.message,duration:2e3,color:"warning"})).present()}};return(n,e)=>(c(),l(a(B),{class:"barcode-scanner","initial-breakpoint":1,breakpoints:[0,1]},{default:t(()=>[o(S,{onScanned:f})]),_:1},8,["initial-breakpoint","breakpoints"]))}});export{A as _,U as a};
