var g=Object.defineProperty,m=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var p=(e,s,r)=>s in e?g(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,d=(e,s)=>{for(var r in s||(s={}))x.call(s,r)&&p(e,r,s[r]);if(v)for(var r of v(s))A.call(s,r)&&p(e,r,s[r]);return e},h=(e,s)=>m(e,w(s));import{r as c,B as E,x as b}from"./index.a5661104.js";const{client:y,proxyUrlFor:t}=b(),k=e=>{const s=h(d({},e),{samples:[],coverPack:[],cover(r){var a,o;if((a=e.resources)!=null&&a.front_cover)return t((o=e.resources)==null?void 0:o.front_cover,r)}});return e.resources&&(e.resources.back_cover&&(s.backCover=t(e.resources.back_cover)),Array.isArray(e.resources.samples)&&(s.samples=e.resources.samples.map(r=>t(r))),Array.isArray(e.resources.cover_pack)&&(s.coverPack=e.resources.cover_pack.map(r=>t(r)))),s},F=()=>{const e=c();return{load:async r=>{const{data:a,error:o}=await y.from("mangas").select("*").eq("gtin13",r).single();if(a!=null)e.value=k(a);else throw Error(o?o.message:"There is no data...")},manga:e}},M=(e=20,s=20)=>{const r=c([]),a=c(""),o=c(0),l=()=>{r.value=[],o.value=0},u=async()=>{if(r.value.length>=e)return;const i=y.from("mangas").select();a.value!=""&&i.textSearch("title_tsv",a.value,{type:"phrase",config:"german"});const{data:n,error:f}=await i.range(o.value,o.value+s).order("date_updated",{ascending:!1});if(f)throw Error(f.message);n!=null&&n.length>0&&(n.forEach(_=>r.value.push(k(_))),o.value=o.value+s)};return E(a,()=>{l(),u()}),{load:u,reset:l,mangas:r,filter:a}};export{F as a,k as e,M as u};
