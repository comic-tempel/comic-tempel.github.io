import{a as P,p as U,_ as T}from"./MangaListItem.21d59ebe.js";import{d as I,P as F,o as n,t as c,a,w as l,u as e,D as H,Q as E,J as p,L as V,z as B,c as f,H as y,M as q,N as M,r as v,R,i as A,k as D,S as Q,T as W,p as G,h as J,U as z,K as L,m as K,v as x,F as g,q as Z,s as $,x as j,y as C,A as b}from"./index.e4222209.js";import{e as O}from"./mangas.7fa84954.js";import{_ as X}from"./plugin-vue_export-helper.21dcd24c.js";const Y={class:"w-20 line-clamp-1 text-sm text-center pt-2"},ee=I({props:{collectionId:null,collectionCoverUrl:null,collectionName:null},setup(m){const h=m,{proxyUrlFor:i}=B(),d=F(()=>h.collectionCoverUrl?i(h.collectionCoverUrl):"");return(_,u)=>(n(),c("div",null,[a(e(E),{class:"shadow w-20 h-20"},{default:l(()=>[a(P,{src:e(d)},{default:l(()=>[a(e(H),{class:"opacity-30 w-full",src:e(U)},null,8,["src"])]),_:1},8,["src"])]),_:1}),p("div",Y,V(m.collectionName),1)]))}}),ae={class:"h-36 sm:h-40 lg:h-52 xl:h-64 overflow-clip"},te={class:"text-sm"},le=I({setup(m){return(h,i)=>(n(),f(e(M),{class:"manga-card"},{default:l(()=>[p("div",ae,[a(e(y),{class:"m-0",animated:""})]),a(e(q),null,{default:l(()=>[p("div",te,[a(e(y),{animated:""})])]),_:1})]),_:1}))}}),se={class:"w-20 text-sm text-center pt-2"},ne=I({setup(m){return(h,i)=>(n(),c("div",null,[a(e(E),{class:"shadow w-20 h-20"},{default:l(()=>[a(e(y),{class:"m-0",animated:""})]),_:1}),p("div",se,[a(e(y),{animated:""})])]))}});const re=C("Serien"),oe=C("alle"),ce={class:"flex overflow-x-auto overflow-y-clip space-x-4 pb-6 pt-4 px-4 snap-x scrollbar-hide"},ue=C("Mangas"),ie=I({setup(m){const{client:i}=B(),d=v(null),_=v(null),u=v(""),S=v(!0),k=v(0);R(async()=>{const o=i.from("collection_updates").select();_.value=null,u.value!=""&&o.textSearch("collection_name",u.value,{type:"phrase",config:"german"});const{data:s,error:t}=await o.range(0,20).order("date_updated",{ascending:!1});if(t)throw _.value=null,Error(t.message);if(s!=null&&s.length>0){const r=[];s.forEach(w=>r.push(w)),_.value=r}}),R(async()=>{const o=i.from("mangas").select();d.value=null,u.value!=""&&o.textSearch("title_tsv",u.value,{type:"phrase",config:"german"});const{data:s,error:t}=await o.range(0,20).order("date_updated",{ascending:!1});if(t)throw Error(t.message);if(s!=null&&s.length>0){const r=[];s.forEach(w=>r.push(O(w))),d.value=r}});const N=o=>{const s=o.detail.scrollTop;s<0||Math.abs(s-k.value)<60||(S.value=s<k.value,k.value=s)};return(o,s)=>(n(),f(e(A),null,{default:l(()=>[a(e(D),{translucent:!0,class:Q(["ion-no-border",{"header-hidden":!S.value}])},{default:l(()=>[a(e(G),{class:"search-toolbar"},{default:l(()=>[a(e(W),{ref:"searchBar",value:u.value,onIonChange:s[0]||(s[0]=t=>{var r;return u.value=(r=t.detail.value)!=null?r:""})},null,8,["value"])]),_:1})]),_:1},8,["class"]),a(e(J),{fullscreen:!0,"scroll-events":!0,onIonScroll:s[1]||(s[1]=t=>N(t))},{default:l(()=>[a(e(j),{lines:"full"},{default:l(()=>[a(e(z),null,{default:l(()=>[a(e(L),{class:"text-xl mt-2"},{default:l(()=>[re]),_:1}),a(e(K),null,{default:l(()=>[oe]),_:1})]),_:1}),p("div",ce,[_.value==null?(n(!0),c(g,{key:0},x(20+1,t=>(n(),c("div",{class:"flex-shrink-0 snap-center",key:t},[a(ne)]))),128)):(n(!0),c(g,{key:1},x(_.value,t=>(n(),c("div",{class:"flex-shrink-0 snap-center",key:t.collection_id},[a(ee,{"collection-id":t.collection_id,"collection-cover-url":t.cover,"collection-name":t.collection_name},null,8,["collection-id","collection-cover-url","collection-name"])]))),128))]),a(e(z),null,{default:l(()=>[a(e(L),{class:"text-xl mt-2"},{default:l(()=>[ue]),_:1})]),_:1}),a(e(Z),null,{default:l(()=>[d.value==null?(n(),f(e($),{key:0},{default:l(()=>[(n(!0),c(g,null,x(20+1,t=>(n(),f(e(b),{key:t,"size-lg":"2","size-md":"3","size-sm":"4","size-xs":"4"},{default:l(()=>[a(le)]),_:2},1024))),128))]),_:1})):(n(),f(e($),{key:1},{default:l(()=>[(n(!0),c(g,null,x(d.value,t=>(n(),f(e(b),{key:t.gtin13,"size-lg":"2","size-md":"3","size-sm":"4","size-xs":"4"},{default:l(()=>{var r;return[a(T,{title:t.title,"cover-url":(r=t.cover("m"))!=null?r:"","router-link":`/manga/${t.gtin13}`},null,8,["title","cover-url","router-link"])]}),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}});var he=X(ie,[["__scopeId","data-v-5a45d319"]]);export{he as default};
