import{p as C,_ as E}from"./MangaListItem.73f28c2d.js";import{d as I,K as b,r as _,o as s,c as u,w as o,u as a,D as v,L as B,z as k,M as m,i as S,a as r,k as z,N,p as U,h as F,O as h,B as L,t as g,v as x,F as y,q as $,s as q,x as M,y as w,A as P}from"./index.e878d5f8.js";import{e as R}from"./mangas.6cb80b95.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";const A=I({props:{collectionId:null,collectionName:null,collectionCoverUrl:null},setup(p){const i=p,{proxyUrlFor:d}=k(),f=b(()=>i.collectionCoverUrl?d(i.collectionCoverUrl):""),t=_(!1);return(c,l)=>(s(),u(a(B),{class:"shadow-lg"},{default:o(()=>[t.value?(s(),u(a(v),{key:0,class:"opacity-30",src:a(C)},null,8,["src"])):(s(),u(a(v),{key:1,src:a(f),onIonError:l[0]||(l[0]=e=>t.value=!0)},null,8,["src"]))]),_:1}))}});const H=w("Serien"),T={class:"flex overflow-x-auto overflow-y-clip space-x-4 py-6 px-4 snap-x"},W=w("Mangas"),D=I({setup(p){const{client:i}=k(),d=_([]),f=_([]),t=_("");return m(async()=>{const c=i.from("collection_updates").select();f.value=[],t.value!=""&&c.textSearch("collection_name",t.value,{type:"phrase",config:"german"});const{data:l,error:e}=await c.range(0,20).order("date_updated",{ascending:!1});if(e)throw Error(e.message);l!=null&&l.length>0&&l.forEach(n=>f.value.push(n))}),m(async()=>{const c=i.from("mangas").select();d.value=[],t.value!=""&&c.textSearch("title_tsv",t.value,{type:"phrase",config:"german"});const{data:l,error:e}=await c.range(0,20).order("date_updated",{ascending:!1});if(e)throw Error(e.message);l!=null&&l.length>0&&l.forEach(n=>d.value.push(R(n)))}),(c,l)=>(s(),u(a(S),null,{default:o(()=>[r(a(z),{class:"ion-no-border",translucent:!0},{default:o(()=>[r(a(U),{class:"search-toolbar"},{default:o(()=>[r(a(N),{ref:"searchBar",value:t.value,onIonChange:l[0]||(l[0]=e=>{var n;return t.value=(n=e.detail.value)!=null?n:""})},null,8,["value"])]),_:1})]),_:1}),r(a(F),null,{default:o(()=>[r(a(M),{lines:"full"},{default:o(()=>[r(a(h),null,{default:o(()=>[H]),_:1}),L("div",T,[(s(!0),g(y,null,x(f.value,e=>(s(),u(A,{class:"flex-shrink-0 w-32 h-32 snap-center",key:e.collection_id,"collection-id":e.collection_id,"collection-name":e.collection_name,"collection-cover-url":e.cover},null,8,["collection-id","collection-name","collection-cover-url"]))),128))]),r(a(h),null,{default:o(()=>[W]),_:1}),r(a($),null,{default:o(()=>[r(a(q),null,{default:o(()=>[(s(!0),g(y,null,x(d.value,e=>(s(),u(a(P),{key:e.gtin13,"size-lg":"3","size-md":"4","size-sm":"4","size-xs":"6"},{default:o(()=>{var n;return[r(E,{title:e.title,"cover-url":(n=e.cover("m"))!=null?n:"","router-link":`/manga/${e.gtin13}`},null,8,["title","cover-url","router-link"])]}),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});var j=V(D,[["__scopeId","data-v-09305fd8"]]);export{j as default};
