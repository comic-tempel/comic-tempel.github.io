import{_ as p,a as g}from"./WikiImg.1a8e85d9.js";import{d as _,c as d,w as e,F as h,u as o,o as m,l as t,a as r,K as b,L as w,t as k,s as v,v as x,V as C,W as y,q as B}from"./index.4480e0c3.js";import{_ as I}from"./BarcodeScanner.6783194b.js";const V={class:"h-36 sm:h-40 lg:h-52 xl:h-64 overflow-clip"},M=t("div",{class:"opacity-30"},[t("img",{class:"w-full",src:g})],-1),$={class:"absolute left-3 top-3"},q={class:"line-clamp-1 text-sm"},D=_({__name:"MangaListItem",props:{title:null,coverUrl:null,isVisible:{type:Boolean}},setup(n){return(c,i)=>(m(),d(o(x),{class:h({"manga-card":!0,translucent:!n.isVisible}),button:""},{default:e(()=>[t("div",V,[r(p,{src:n.coverUrl},{default:e(()=>[M,t("div",$,[r(o(b),{class:"text-white"},{default:e(()=>[w("kein Cover")]),_:1})])]),_:1},8,["src"])]),r(o(v),null,{default:e(()=>[t("div",q,k(n.title),1)]),_:1})]),_:1},8,["class"]))}}),U=_({__name:"BarcodeScannerModal",emits:["scanned"],setup(n,{emit:c}){const{client:i}=B(),u=async s=>{const{data:a,error:l}=await i.from("mangas").select().or(`gtin13.eq.${s},isbn10.eq.${s}`).single();return l||a==null?Promise.reject(new Error("Das ist kein Manga")):a},f=async s=>{try{const a=await u(s);c("scanned",a.gtin13)}catch(a){(await y.create({message:a.message,duration:2e3,color:"warning"})).present()}};return(s,a)=>(m(),d(o(C),{class:"barcode-scanner","initial-breakpoint":1,breakpoints:[0,1]},{default:e(()=>[r(I,{onScanned:f})]),_:1},8,["initial-breakpoint","breakpoints"]))}});export{U as _,D as a};
