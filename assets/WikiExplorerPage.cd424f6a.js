import{p as U,_ as F}from"./MangaListItem.60079762.js";import{d as w,K as H,r as m,o as n,t as u,a as l,w as a,c as i,u as e,D as z,L as B,B as x,E as M,z as N,M as k,G as T,H as V,N as E,i as q,k as A,O as D,P as G,p as Q,h as W,Q as L,C as R,m as K,v as y,F as I,q as O,s as $,x as Z,y as S,A as b}from"./index.945314bd.js";import{e as j}from"./mangas.b0bc3fae.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";const X={class:"w-20 line-clamp-1 text-sm text-center pt-2"},Y=w({props:{collectionId:null,collectionCoverUrl:null,collectionName:null},setup(v){const h=v,{proxyUrlFor:_}=N(),f=H(()=>h.collectionCoverUrl?_(h.collectionCoverUrl):""),o=m(!1);return(d,p)=>(n(),u("div",null,[l(e(B),{class:"shadow w-20 h-20"},{default:a(()=>[o.value?(n(),i(e(z),{key:0,class:"opacity-30",src:e(U)},null,8,["src"])):(n(),i(e(z),{key:1,src:e(f),onIonError:p[0]||(p[0]=g=>o.value=!0)},null,8,["src"]))]),_:1}),x("div",X,M(v.collectionName),1)]))}}),ee={class:"h-36 sm:h-40 lg:h-52 xl:h-64 overflow-clip"},te={class:"text-sm"},le=w({setup(v){return(h,_)=>(n(),i(e(V),{class:"manga-card"},{default:a(()=>[x("div",ee,[l(e(k),{class:"m-0",animated:""})]),l(e(T),null,{default:a(()=>[x("div",te,[l(e(k),{animated:""})])]),_:1})]),_:1}))}}),ae={class:"w-20 text-sm text-center pt-2"},se=w({setup(v){return(h,_)=>(n(),u("div",null,[l(e(B),{class:"shadow w-20 h-20"},{default:a(()=>[l(e(k),{class:"m-0",animated:""})]),_:1}),x("div",ae,[l(e(k),{animated:""})])]))}});const ne=S("Serien"),re=S("alle"),oe={class:"flex overflow-x-auto overflow-y-clip space-x-4 pb-6 pt-4 px-4 snap-x scrollbar-hide"},ce=S("Mangas"),ue=w({setup(v){const{client:_}=N(),f=m(null),o=m(null),d=m(""),p=m(!0),g=m(0);E(async()=>{const c=_.from("collection_updates").select();o.value=null,d.value!=""&&c.textSearch("collection_name",d.value,{type:"phrase",config:"german"});const{data:s,error:t}=await c.range(0,20).order("date_updated",{ascending:!1});if(t)throw o.value=null,Error(t.message);if(s!=null&&s.length>0){const r=[];s.forEach(C=>r.push(C)),o.value=r}}),E(async()=>{const c=_.from("mangas").select();f.value=null,d.value!=""&&c.textSearch("title_tsv",d.value,{type:"phrase",config:"german"});const{data:s,error:t}=await c.range(0,20).order("date_updated",{ascending:!1});if(t)throw Error(t.message);if(s!=null&&s.length>0){const r=[];s.forEach(C=>r.push(j(C))),f.value=r}});const P=c=>{const s=c.detail.scrollTop;s<0||Math.abs(s-g.value)<60||(p.value=s<g.value,g.value=s)};return(c,s)=>(n(),i(e(q),null,{default:a(()=>[l(e(A),{translucent:!0,class:D(["ion-no-border",{"header-hidden":!p.value}])},{default:a(()=>[l(e(Q),{class:"search-toolbar"},{default:a(()=>[l(e(G),{ref:"searchBar",value:d.value,onIonChange:s[0]||(s[0]=t=>{var r;return d.value=(r=t.detail.value)!=null?r:""})},null,8,["value"])]),_:1})]),_:1},8,["class"]),l(e(W),{fullscreen:!0,"scroll-events":!0,onIonScroll:s[1]||(s[1]=t=>P(t))},{default:a(()=>[l(e(Z),{lines:"full"},{default:a(()=>[l(e(L),null,{default:a(()=>[l(e(R),{class:"text-xl mt-2"},{default:a(()=>[ne]),_:1}),l(e(K),null,{default:a(()=>[re]),_:1})]),_:1}),x("div",oe,[o.value==null?(n(!0),u(I,{key:0},y(20+1,t=>(n(),u("div",{class:"flex-shrink-0 snap-center",key:t},[l(se)]))),128)):(n(!0),u(I,{key:1},y(o.value,t=>(n(),u("div",{class:"flex-shrink-0 snap-center",key:t.collection_id},[l(Y,{"collection-id":t.collection_id,"collection-cover-url":t.cover,"collection-name":t.collection_name},null,8,["collection-id","collection-cover-url","collection-name"])]))),128))]),l(e(L),null,{default:a(()=>[l(e(R),{class:"text-xl mt-2"},{default:a(()=>[ce]),_:1})]),_:1}),l(e(O),null,{default:a(()=>[f.value==null?(n(),i(e($),{key:0},{default:a(()=>[(n(!0),u(I,null,y(20+1,t=>(n(),i(e(b),{key:t,"size-lg":"2","size-md":"3","size-sm":"4","size-xs":"4"},{default:a(()=>[l(le)]),_:2},1024))),128))]),_:1})):(n(),i(e($),{key:1},{default:a(()=>[(n(!0),u(I,null,y(f.value,t=>(n(),i(e(b),{key:t.gtin13,"size-lg":"2","size-md":"3","size-sm":"4","size-xs":"4"},{default:a(()=>{var r;return[l(F,{title:t.title,"cover-url":(r=t.cover("m"))!=null?r:"","router-link":`/manga/${t.gtin13}`},null,8,["title","cover-url","router-link"])]}),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}});var me=J(ue,[["__scopeId","data-v-5a45d319"]]);export{me as default};
