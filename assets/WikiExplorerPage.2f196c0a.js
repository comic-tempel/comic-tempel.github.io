import{p as z,_ as P}from"./MangaListItem.08c6e59c.js";import{d as E,K as L,r as i,o as c,c as v,w as s,u as a,D as I,L as U,z as B,M as y,i as F,a as t,k as M,N,O as V,p as $,h as q,P as k,C as w,m as H,B as b,t as h,v as C,F as S,q as R,s as T,x as A,y as m,E as D,A as W}from"./index.f8caf9d6.js";import{e as G}from"./mangas.79fe726f.js";import{_ as K}from"./plugin-vue_export-helper.21dcd24c.js";const O=E({props:{collectionId:null,collectionCoverUrl:null},setup(x){const d=x,{proxyUrlFor:f}=B(),_=L(()=>d.collectionCoverUrl?f(d.collectionCoverUrl):""),r=i(!1);return(p,u)=>(c(),v(a(U),{class:"shadow"},{default:s(()=>[r.value?(c(),v(a(I),{key:0,class:"opacity-30",src:a(z)},null,8,["src"])):(c(),v(a(I),{key:1,src:a(_),onIonError:u[0]||(u[0]=g=>r.value=!0)},null,8,["src"]))]),_:1}))}});const Q=m("Serien"),Z=m("alle"),j={class:"flex overflow-x-auto overflow-y-clip space-x-4 pb-6 pt-4 px-4 snap-x scrollbar-hide"},J={class:"w-20 line-clamp-1 text-sm text-center pt-2"},X=m("Mangas"),Y=E({setup(x){const{client:d}=B(),f=i([]),_=i([]),r=i(""),p=i(!0),u=i(0);y(async()=>{const n=d.from("collection_updates").select();_.value=[],r.value!=""&&n.textSearch("collection_name",r.value,{type:"phrase",config:"german"});const{data:l,error:e}=await n.range(0,20).order("date_updated",{ascending:!1});if(e)throw Error(e.message);l!=null&&l.length>0&&l.forEach(o=>_.value.push(o))}),y(async()=>{const n=d.from("mangas").select();f.value=[],r.value!=""&&n.textSearch("title_tsv",r.value,{type:"phrase",config:"german"});const{data:l,error:e}=await n.range(0,20).order("date_updated",{ascending:!1});if(e)throw Error(e.message);l!=null&&l.length>0&&l.forEach(o=>f.value.push(G(o)))});const g=n=>{const l=n.detail.scrollTop;l<0||Math.abs(l-u.value)<60||(p.value=l<u.value,u.value=l)};return(n,l)=>(c(),v(a(F),null,{default:s(()=>[t(a(M),{translucent:!0,class:N(["ion-no-border",{"header-hidden":!p.value}])},{default:s(()=>[t(a($),{class:"search-toolbar"},{default:s(()=>[t(a(V),{ref:"searchBar",value:r.value,onIonChange:l[0]||(l[0]=e=>{var o;return r.value=(o=e.detail.value)!=null?o:""})},null,8,["value"])]),_:1})]),_:1},8,["class"]),t(a(q),{fullscreen:!0,"scroll-events":!0,onIonScroll:l[1]||(l[1]=e=>g(e))},{default:s(()=>[t(a(A),{lines:"full"},{default:s(()=>[t(a(k),null,{default:s(()=>[t(a(w),{class:"text-xl"},{default:s(()=>[Q]),_:1}),t(a(H),null,{default:s(()=>[Z]),_:1})]),_:1}),b("div",j,[(c(!0),h(S,null,C(_.value,e=>(c(),h("div",{class:"flex-shrink-0 snap-center",key:e.collection_id},[t(O,{class:"w-20 h-20","collection-id":e.collection_id,"collection-cover-url":e.cover},null,8,["collection-id","collection-cover-url"]),b("div",J,D(e.collection_name),1)]))),128))]),t(a(k),null,{default:s(()=>[t(a(w),{class:"text-xl"},{default:s(()=>[X]),_:1})]),_:1}),t(a(R),null,{default:s(()=>[t(a(T),null,{default:s(()=>[(c(!0),h(S,null,C(f.value,e=>(c(),v(a(W),{key:e.gtin13,"size-lg":"2","size-md":"3","size-sm":"4","size-xs":"4"},{default:s(()=>{var o;return[t(P,{title:e.title,"cover-url":(o=e.cover("m"))!=null?o:"","router-link":`/manga/${e.gtin13}`},null,8,["title","cover-url","router-link"])]}),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});var se=K(Y,[["__scopeId","data-v-a5943cb2"]]);export{se as default};
