import{p as v,u as b,s as $,c as B}from"./mangas.0b18f73b.js";import{d as g,o as l,c as o,w as e,a,u as t,I as E,b as C,t as M,e as S,f as I,g as _,r as k,h as y,i as x,j as A,k as R,l as F,m as p,n as H,p as T,q as w,s as N,F as V,v as P,x as j,y as q,z}from"./index.03df7e20.js";import{c as D,u as G}from"./useMachine.2d3f02d4.js";const J=g({props:{title:null},setup(u){return(r,i)=>(l(),o(t(x),{translucent:!0},{default:e(()=>[a(t(y),null,{default:e(()=>[a(t(E),null,{default:e(()=>[C(M(u.title),1)]),_:1}),a(t(S),{slot:"start"},{default:e(()=>[a(t(I),{"router-link":"/profile"},{default:e(()=>[a(t(_),{slot:"icon-only",src:t(v)},null,8,["src"])]),_:1})]),_:1}),a(t(S),{slot:"end"},{default:e(()=>[k(r.$slots,"actions")]),_:3})]),_:3}),k(r.$slots,"toolbars")]),_:3}))}}),K=g({props:{title:null},setup(u){return(r,i)=>(l(),o(t(R),{button:!0,detail:!0},{default:e(()=>[a(t(A),{class:"ion-text-wrap"},{default:e(()=>[C(M(u.title),1)]),_:1})]),_:1}))}}),W=g({setup(u){const{load:r,mangas:i,filter:c}=b(),m=F(null),L=D({id:"MangaListPage",initial:"ListMangas",states:{ListMangas:{entry:"load",on:{SEARCH:{target:"SearchMangas",actions:"focusSearchInput"}}},SearchMangas:{on:{CLEAR_SEARCH:{target:"ListMangas",actions:["clearFilter"]}}}}},{actions:{focusSearchInput:()=>setTimeout(()=>{var d;return(d=m.value)==null?void 0:d.$el.setFocus()},300),clearFilter:()=>c.value="",load:r}}),{state:f,send:h}=G(L,{devTools:!1});return(d,s)=>(l(),o(t(z),null,{default:e(()=>[a(J,{title:"Mangas"},{actions:e(()=>[t(f).matches("ListMangas")?(l(),o(t(I),{key:0,onClick:s[0]||(s[0]=n=>t(h)("SEARCH"))},{default:e(()=>[a(t(_),{slot:"icon-only",icon:t($)},null,8,["icon"])]),_:1})):p("",!0),t(f).matches("SearchMangas")?(l(),o(t(I),{key:1,onClick:s[1]||(s[1]=n=>t(h)("CLEAR_SEARCH"))},{default:e(()=>[a(t(_),{slot:"icon-only",icon:t(B)},null,8,["icon"])]),_:1})):p("",!0)]),toolbars:e(()=>[t(f).matches("SearchMangas")?(l(),o(t(y),{key:0,class:"ion-no-border"},{default:e(()=>[a(t(H),{ref_key:"searchBar",ref:m,value:t(c),onIonChange:s[2]||(s[2]=n=>c.value=n.detail.value)},null,8,["value"])]),_:1})):p("",!0)]),_:1}),a(t(q),{fullscreen:!0},{default:e(()=>[a(t(T),{lines:"full"},{default:e(()=>[(l(!0),w(V,null,N(t(i),n=>(l(),o(K,{key:n.gtin13,title:n.title,"router-link":`/manga/${n.gtin13}`},null,8,["title","router-link"]))),128))]),_:1}),a(t(P),{onIonInfinite:s[3]||(s[3]=n=>t(r)().then(()=>n.target.complete()))},{default:e(()=>[a(t(j))]),_:1})]),_:1})]),_:1}))}});export{W as default};
